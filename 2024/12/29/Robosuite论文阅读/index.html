

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">

  <link rel="apple-touch-icon" sizes="76x76" href="/img/head.jpg">
  <link rel="icon" href="/img/head.jpg">
  

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="Rayy">
  <meta name="keywords" content="">
  
    <meta name="description" content="RoboSuite 论文 地址 Introduction robosuite 由 MuJoCo 引擎驱动，主要作用是通过物理仿真模拟机械臂与环境交互，提供一系列的 API，可以从中获取数据进行数据驱动的强化学习和模拟学习。 最新版本：1.5，支持 7 种 机器人（robot），8 种抓取臂（gripper），6 种控制模式和 9 种标准任务。 系统模块   模型 API：用模块或程序去定义、描述仿">
<meta property="og:type" content="article">
<meta property="og:title" content="Robosuite 论文阅读">
<meta property="og:url" content="https://kingdom-of-warriors.github.io/2024/12/29/Robosuite%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB/index.html">
<meta property="og:site_name" content="kingdom-of-warriors">
<meta property="og:description" content="RoboSuite 论文 地址 Introduction robosuite 由 MuJoCo 引擎驱动，主要作用是通过物理仿真模拟机械臂与环境交互，提供一系列的 API，可以从中获取数据进行数据驱动的强化学习和模拟学习。 最新版本：1.5，支持 7 种 机器人（robot），8 种抓取臂（gripper），6 种控制模式和 9 种标准任务。 系统模块   模型 API：用模块或程序去定义、描述仿">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://kingdom-of-warriors.github.io/img/robosuite/robosuite.png">
<meta property="og:image" content="https://kingdom-of-warriors.github.io/img/robosuite/low_dim.png">
<meta property="og:image" content="https://kingdom-of-warriors.github.io/img/robosuite/submodule.png">
<meta property="og:image" content="https://kingdom-of-warriors.github.io/img/robosuite/image_mode.png">
<meta property="og:image" content="https://kingdom-of-warriors.github.io/img/robosuite/change.png">
<meta property="og:image" content="https://kingdom-of-warriors.github.io/img/robosuite/datasize.png">
<meta property="og:image" content="https://kingdom-of-warriors.github.io/img/robosuite/Lift_epoch_500.gif">
<meta property="og:image" content="https://kingdom-of-warriors.github.io/img/robosuite/droid_ex.png">
<meta property="og:image" content="https://kingdom-of-warriors.github.io/img/robosuite/simpler_ex.png">
<meta property="og:image" content="https://kingdom-of-warriors.github.io/img/robosuite/genesis_ex.png">
<meta property="og:image" content="https://kingdom-of-warriors.github.io/img/robosuite/libero_ex.png">
<meta property="og:image" content="https://kingdom-of-warriors.github.io/img/robosuite/droid.png">
<meta property="og:image" content="https://kingdom-of-warriors.github.io/img/robosuite/droid_light.png">
<meta property="og:image" content="https://kingdom-of-warriors.github.io/img/robosuite/genesis.png">
<meta property="og:image" content="https://kingdom-of-warriors.github.io/img/robosuite/droid.png">
<meta property="article:published_time" content="2024-12-28T16:09:48.000Z">
<meta property="article:modified_time" content="2025-03-06T11:02:46.337Z">
<meta property="article:author" content="Rayy">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://kingdom-of-warriors.github.io/img/robosuite/robosuite.png">
  
  
  
  <title>Robosuite 论文阅读 - kingdom-of-warriors</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/KaTeX/0.16.2/katex.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1749284_5i9bdhy70f8.css">



<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1736178_k526ubmyhba.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  



  
<link rel="stylesheet" href="/css/custom.css">



  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"kingdom-of-warriors.github.io","root":"/","version":"1.9.8","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false},"umami":{"src":null,"website_id":null,"domains":null,"start_time":"2024-01-01T00:00:00.000Z","token":null,"api_server":null}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 7.3.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Fluid</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>首页</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/" target="_self">
                <i class="iconfont icon-archive-fill"></i>
                <span>归档</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>分类</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/" target="_self">
                <i class="iconfont icon-tags-fill"></i>
                <span>标签</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/" target="_self">
                <i class="iconfont icon-user-fill"></i>
                <span>关于</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="Robosuite 论文阅读"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2024-12-29 00:09" pubdate>
          2024年12月29日 凌晨
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          6.1k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          51 分钟
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">Robosuite 论文阅读</h1>
            
            
              <div class="markdown-body">
                
                <h2 id="RoboSuite-论文-地址">RoboSuite 论文 <a target="_blank" rel="noopener" href="https://arxiv.org/abs/2009.12293">地址</a></h2>
<h3 id="Introduction">Introduction</h3>
<p><code>robosuite</code> 由 MuJoCo 引擎驱动，主要作用是通过物理仿真模拟机械臂与环境交互，提供一系列的 API，可以从中获取数据进行数据驱动的强化学习和模拟学习。</p>
<p>最新版本：1.5，支持 7 种 机器人（robot），8 种抓取臂（gripper），6 种控制模式和 9 种标准任务。</p>
<h3 id="系统模块">系统模块</h3>
<ol>
<li>
<p>模型 API：用模块或程序去定义、描述仿真环境，可生成仿真模型（<strong>Simulation Model</strong>），也叫环境（environment）。环境通过传感器来生成监控结果（如相机生成画面），并从策略（policy）或 I/O 接收动作指令，这些指令由控制器（controller）将原始动作空间（如关节速度、三维位置等）转化为力矩（torque）而得到。</p>
</li>
<li>
<p>仿真 API：为策略（policy）的输入提供接口，并接收监控结果和奖励（reward）。</p>
</li>
<li>
<p>仿真模型（<strong>Simulation Model</strong>）:由 <strong>Task</strong> 对象定义，概括了仿真三个重要模块：</p>
<ul>
<li><strong>RobotModel</strong>(<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>≥</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">\ge 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7719em;vertical-align:-0.136em;"></span><span class="mrel">≥</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>)：从给定的 XML 文件中加载机器人的模型和对应的夹爪模型（<strong>GripperModel</strong>）；</li>
<li><strong>ObjectModel</strong>(<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>≥</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">\ge 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7719em;vertical-align:-0.136em;"></span><span class="mrel">≥</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span>)：由 <strong>MujocoObject</strong> 类定义，可从 3D 对象资产种加载，也可以用 API 程序化的生成；</li>
<li><strong>Arena</strong>(<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>)：定义了机器人的工作空间，包括环境固定装置，如桌面，以及它们的放置位置。</li>
</ul>
<p><strong>Task</strong> 对象通过 MJCF 模型语言，将上面三个组成部分整合为一个 XML 对象，而这个生成的 XML 对象通过 <strong>mujoco-py</strong> 库传递给 MuJoCo 引擎，进而实例化和初始化仿真模型。实例化后的结果是 MjSim 对象，可通过 API 来访问。<br>
<img src="/img/robosuite/robosuite.png" srcset="/img/loading.gif" lazyload alt="系统的各种关键模块及其相互合作"></p>
<p><strong>Environment</strong> 对象提供了外部输入的 API 接口，可以与仿真交互。外部输入与控制机器人和夹爪的动作命令相匹配，而动作空间与机器人的控制器（controller）相匹配。例如，对机械臂的关节位置控制器，动作空间对应于各关节的期望位置；对于操作空间控制器，动作空间对应于末端执行器期望的3D笛卡尔位置或期望的全6D笛卡尔位姿（X,Y,Z,Roll,Pitch,Yaw）。这些空间指令可以由算法自动生成，或者是通过 I/O 输入。</p>
<p><strong>Sensor</strong> 从 MjSim 对象中获取信息并生成监控结果。例如：RGB-D 相机，力-力矩测量计，本体感觉数据，任务进展，成功条件（reward等等）。</p>
</li>
</ol>
<h4 id="Environment">Environment</h4>
<p>创造环境的代码：<code>make</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> robosuite <span class="hljs-keyword">as</span> suite<br>env = suite.make(<br>    env_name=<span class="hljs-string">&quot;Lift&quot;</span>, <span class="hljs-comment"># try with other tasks like &quot;Stack&quot; and &quot;Door&quot;</span><br>    robots=<span class="hljs-string">&quot;Panda&quot;</span>,  <span class="hljs-comment"># try with other robots like &quot;Sawyer&quot; and &quot;Jaco&quot;</span><br>    has_renderer=<span class="hljs-literal">True</span>,<br>    has_offscreen_renderer=<span class="hljs-literal">False</span>,<br>    use_camera_obs=<span class="hljs-literal">False</span>,<br>)<br><span class="hljs-comment"># 其他参数例如 robots, controller_configs, env_name等等</span><br></code></pre></td></tr></table></figure>
<p><strong>Task</strong> 实例包含一个 Arena 模型（基于 XML，定义工作区和相机位置），Robot（arm 种类，如Sawyer, Panda） 和 Object 模型实例（对应物理模型，如立方体、带把手的罐子）列表，还有 <code>placement_initializer</code> 作为输入，决定仿真的开始状态分布。</p>
<h4 id="Robots">Robots</h4>
<p>Robot 类由 <strong>RobotModel</strong>, <strong>GripperModel(s)</strong> 和 <strong>Controller(s)</strong> 定义，具有以下特点：</p>
<ol>
<li>robot 模型多样化、真实化；</li>
<li>模块化保障，可以即插即用，可以使用任意机器人、夹爪、控制器组合；</li>
<li>自我封闭，任何信息都可在实例中找到。</li>
</ol>
<table>
<thead>
<tr>
<th>机器人名称</th>
<th>自由度</th>
<th>夹爪类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>Sawyer</td>
<td>7</td>
<td><strong>RethinkGripper</strong></td>
<td>Rethink Robotics 单臂机器人</td>
</tr>
<tr>
<td>Panda</td>
<td>7</td>
<td><strong>PandaGripper</strong></td>
<td>Franka Emika 协作机器人</td>
</tr>
<tr>
<td>IIWA</td>
<td>7</td>
<td><strong>Robotiq140Gripper</strong></td>
<td>KUKA 轻型机器人</td>
</tr>
<tr>
<td>Jaco</td>
<td>7</td>
<td><strong>JacoThreeFingerGripper</strong></td>
<td>Kinova 轻型机械臂</td>
</tr>
<tr>
<td>Kinova3</td>
<td>7</td>
<td><strong>Robotiq85Gripper</strong></td>
<td>Kinova 第三代机械臂</td>
</tr>
<tr>
<td>UR5e</td>
<td>6</td>
<td><strong>Robotiq85Gripper</strong></td>
<td>Universal Robots 协作机器人</td>
</tr>
<tr>
<td>Baxter</td>
<td>7</td>
<td><strong>RethinkGripper</strong></td>
<td>Rethink Robotics 双臂机器人</td>
</tr>
</tbody>
</table>
<h4 id="Controllers">Controllers</h4>
<p>Controllers 将高层的动作转化为底层的虚拟电机指令，驱动机器人运动。<br>
可选项：<code>OSC POSE</code>, <code>OSC POSITION</code>, <code>JOINT POSITION</code>, <code>JOINT VELOCITY</code>, <code>JOINT TORQUE</code></p>
<table>
<thead>
<tr>
<th>Controller Name and Options</th>
<th>Controller Type</th>
<th>Action Dimensions (Gripper Not Included)</th>
<th>Action Format</th>
</tr>
</thead>
<tbody>
<tr>
<td>OSC POSE impedance_mode= fixed</td>
<td>Operational Space Control (Position &amp; Orientation)</td>
<td>6</td>
<td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><msub><mi>p</mi><mi>x</mi></msub><mo separator="true">,</mo><msub><mi>p</mi><mi>y</mi></msub><mo separator="true">,</mo><msub><mi>p</mi><mi>z</mi></msub><mo separator="true">,</mo><msub><mi>r</mi><mi>x</mi></msub><mo separator="true">,</mo><msub><mi>r</mi><mi>y</mi></msub><mo separator="true">,</mo><msub><mi>r</mi><mi>z</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(p_x, p_y, p_z, r_x, r_y, r_z)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-0.2861em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.04398em;">z</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.04398em;">z</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></td>
</tr>
<tr>
<td>OSC POSE impedance_mode= variable_kp</td>
<td>Operational Space Control with variable stiffness (critically damped)</td>
<td>12</td>
<td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><msub><mi>p</mi><mi>x</mi></msub><mo separator="true">,</mo><msub><mi>p</mi><mi>y</mi></msub><mo separator="true">,</mo><msub><mi>p</mi><mi>z</mi></msub><mo separator="true">,</mo><msub><mi>r</mi><mi>x</mi></msub><mo separator="true">,</mo><msub><mi>r</mi><mi>y</mi></msub><mo separator="true">,</mo><msub><mi>r</mi><mi>z</mi></msub><mo stretchy="false">)</mo><mo stretchy="false">(</mo><msub><mi>k</mi><mrow><mi>p</mi><mi>x</mi></mrow></msub><mo separator="true">,</mo><msub><mi>k</mi><mrow><mi>p</mi><mi>y</mi></mrow></msub><mo separator="true">,</mo><msub><mi>k</mi><mrow><mi>p</mi><mi>z</mi></mrow></msub><mo separator="true">,</mo><msub><mi>k</mi><mrow><mi>r</mi><mi>x</mi></mrow></msub><mo separator="true">,</mo><msub><mi>k</mi><mrow><mi>r</mi><mi>y</mi></mrow></msub><mo separator="true">,</mo><msub><mi>k</mi><mrow><mi>r</mi><mi>z</mi></mrow></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(p_x, p_y, p_z, r_x, r_y, r_z) (k_{px}, k_{py}, k_{pz}, k_{rx}, k_{ry}, k_{rz})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-0.2861em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.04398em;">z</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.04398em;">z</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0315em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">p</span><span class="mord mathnormal mtight">x</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0315em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">p</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0315em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">p</span><span class="mord mathnormal mtight" style="margin-right:0.04398em;">z</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0315em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span><span class="mord mathnormal mtight">x</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0315em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">ry</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0315em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.04398em;">rz</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></td>
</tr>
<tr>
<td>OSC_POSE impedance_mode= variable</td>
<td>Operational Space Control with variable impedance</td>
<td>18</td>
<td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><msub><mi>p</mi><mi>x</mi></msub><mo separator="true">,</mo><msub><mi>p</mi><mi>y</mi></msub><mo separator="true">,</mo><msub><mi>p</mi><mi>z</mi></msub><mo separator="true">,</mo><msub><mi>r</mi><mi>x</mi></msub><mo separator="true">,</mo><msub><mi>r</mi><mi>y</mi></msub><mo separator="true">,</mo><msub><mi>r</mi><mi>z</mi></msub><mo stretchy="false">)</mo><mo stretchy="false">(</mo><msub><mi>k</mi><mrow><mi>p</mi><mi>x</mi></mrow></msub><mo separator="true">,</mo><msub><mi>k</mi><mrow><mi>p</mi><mi>y</mi></mrow></msub><mo separator="true">,</mo><msub><mi>k</mi><mrow><mi>p</mi><mi>z</mi></mrow></msub><mo separator="true">,</mo><msub><mi>k</mi><mrow><mi>r</mi><mi>x</mi></mrow></msub><mo separator="true">,</mo><msub><mi>k</mi><mrow><mi>r</mi><mi>y</mi></mrow></msub><mo separator="true">,</mo><msub><mi>k</mi><mrow><mi>r</mi><mi>z</mi></mrow></msub><mo stretchy="false">)</mo><mo stretchy="false">(</mo><msub><mi>k</mi><mrow><mi>d</mi><mi>x</mi></mrow></msub><mo separator="true">,</mo><msub><mi>k</mi><mrow><mi>d</mi><mi>y</mi></mrow></msub><mo separator="true">,</mo><msub><mi>k</mi><mrow><mi>d</mi><mi>z</mi></mrow></msub><mo separator="true">,</mo><msub><mi>k</mi><mrow><mi>d</mi><mi>r</mi><mi>x</mi></mrow></msub><mo separator="true">,</mo><msub><mi>k</mi><mrow><mi>d</mi><mi>r</mi><mi>y</mi></mrow></msub><mo separator="true">,</mo><msub><mi>k</mi><mrow><mi>d</mi><mi>r</mi><mi>z</mi></mrow></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(p_x, p_y, p_z, r_x, r_y, r_z) (k_{px}, k_{py}, k_{pz}, k_{rx}, k_{ry}, k_{rz}) (k_{dx}, k_{dy}, k_{dz}, k_{drx}, k_{dry}, k_{drz})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-0.2861em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.04398em;">z</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.04398em;">z</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0315em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">p</span><span class="mord mathnormal mtight">x</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0315em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">p</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0315em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">p</span><span class="mord mathnormal mtight" style="margin-right:0.04398em;">z</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0315em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span><span class="mord mathnormal mtight">x</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0315em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">ry</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0315em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.04398em;">rz</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0315em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">x</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0315em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0315em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight" style="margin-right:0.04398em;">z</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0315em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span><span class="mord mathnormal mtight">x</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0315em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">ry</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0315em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight" style="margin-right:0.04398em;">rz</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></td>
</tr>
<tr>
<td>OSC_POSITION impedance_mode= fixed</td>
<td>Operational Space Control (Position only)</td>
<td>3</td>
<td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><msub><mi>p</mi><mi>x</mi></msub><mo separator="true">,</mo><msub><mi>p</mi><mi>y</mi></msub><mo separator="true">,</mo><msub><mi>p</mi><mi>z</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(p_x, p_y, p_z)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-0.2861em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.04398em;">z</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></td>
</tr>
<tr>
<td>OSC_POSITION impedance_mode= variable_kp</td>
<td>Operational Space Control with variable stiffness (critically damped)</td>
<td>9</td>
<td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><msub><mi>p</mi><mi>x</mi></msub><mo separator="true">,</mo><msub><mi>p</mi><mi>y</mi></msub><mo separator="true">,</mo><msub><mi>p</mi><mi>z</mi></msub><mo stretchy="false">)</mo><mo stretchy="false">(</mo><msub><mi>k</mi><mrow><mi>p</mi><mi>x</mi></mrow></msub><mo separator="true">,</mo><msub><mi>k</mi><mrow><mi>p</mi><mi>y</mi></mrow></msub><mo separator="true">,</mo><msub><mi>k</mi><mrow><mi>p</mi><mi>z</mi></mrow></msub><mo separator="true">,</mo><msub><mi>k</mi><mi>p</mi></msub><mo separator="true">,</mo><msub><mi>k</mi><mi>p</mi></msub><mo separator="true">,</mo><msub><mi>k</mi><mi>p</mi></msub><mo separator="true">,</mo><msub><mi>k</mi><mrow><mi>r</mi><mi>z</mi></mrow></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(p_x, p_y, p_z) (k_{px}, k_{py}, k_{pz}, k_p, k_p, k_p, k_{rz})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-0.2861em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.04398em;">z</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0315em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">p</span><span class="mord mathnormal mtight">x</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0315em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">p</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0315em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">p</span><span class="mord mathnormal mtight" style="margin-right:0.04398em;">z</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0315em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">p</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0315em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">p</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0315em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">p</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0315em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.04398em;">rz</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></td>
</tr>
<tr>
<td>OSC POSITION impedance_mode= variable</td>
<td>Operational Space Control with variable impedance</td>
<td>15</td>
<td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><msub><mi>p</mi><mi>x</mi></msub><mo separator="true">,</mo><msub><mi>p</mi><mi>y</mi></msub><mo separator="true">,</mo><msub><mi>p</mi><mi>z</mi></msub><mo stretchy="false">)</mo><mo stretchy="false">(</mo><msub><mi>k</mi><mrow><mi>p</mi><mi>x</mi></mrow></msub><mo separator="true">,</mo><msub><mi>k</mi><mrow><mi>p</mi><mi>y</mi></mrow></msub><mo separator="true">,</mo><msub><mi>k</mi><mrow><mi>p</mi><mi>z</mi></mrow></msub><mo separator="true">,</mo><msub><mi>k</mi><mrow><mi>r</mi><mi>x</mi></mrow></msub><mo separator="true">,</mo><msub><mi>k</mi><mrow><mi>r</mi><mi>y</mi></mrow></msub><mo separator="true">,</mo><msub><mi>k</mi><mrow><mi>r</mi><mi>z</mi></mrow></msub><mo stretchy="false">)</mo><mo stretchy="false">(</mo><msub><mi>k</mi><mrow><mi>d</mi><mi>x</mi></mrow></msub><mo separator="true">,</mo><msub><mi>k</mi><mrow><mi>d</mi><mi>y</mi></mrow></msub><mo separator="true">,</mo><msub><mi>k</mi><mrow><mi>d</mi><mi>z</mi></mrow></msub><mo separator="true">,</mo><msub><mi>k</mi><mrow><mi>d</mi><mi>r</mi><mi>x</mi></mrow></msub><mo separator="true">,</mo><msub><mi>k</mi><mrow><mi>d</mi><mi>r</mi><mi>y</mi></mrow></msub><mo separator="true">,</mo><msub><mi>k</mi><mrow><mi>d</mi><mi>r</mi><mi>z</mi></mrow></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(p_x, p_y, p_z) (k_{px}, k_{py}, k_{pz}, k_{rx}, k_{ry}, k_{rz}) (k_{dx}, k_{dy}, k_{dz}, k_{drx}, k_{dry}, k_{drz})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-0.2861em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.04398em;">z</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0315em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">p</span><span class="mord mathnormal mtight">x</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0315em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">p</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0315em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">p</span><span class="mord mathnormal mtight" style="margin-right:0.04398em;">z</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0315em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span><span class="mord mathnormal mtight">x</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0315em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">ry</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0315em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.04398em;">rz</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0315em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">x</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0315em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0315em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight" style="margin-right:0.04398em;">z</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0315em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span><span class="mord mathnormal mtight">x</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0315em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">ry</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0315em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight" style="margin-right:0.04398em;">rz</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></td>
</tr>
<tr>
<td>IK POSE</td>
<td>Inverse Kinematics Control (Position &amp; Orientation)</td>
<td>7</td>
<td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><msub><mi>p</mi><mi>x</mi></msub><mo separator="true">,</mo><msub><mi>p</mi><mi>y</mi></msub><mo separator="true">,</mo><msub><mi>p</mi><mi>z</mi></msub><mo separator="true">,</mo><msub><mi>q</mi><mi>x</mi></msub><mo separator="true">,</mo><msub><mi>q</mi><mi>y</mi></msub><mo separator="true">,</mo><msub><mi>q</mi><mi>z</mi></msub><mo separator="true">,</mo><msub><mi>q</mi><mi>w</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(p_x, p_y, p_z, q_x, q_y, q_z, q_w)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-0.2861em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.04398em;">z</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.04398em;">z</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02691em;">w</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></td>
</tr>
<tr>
<td>JOINT_POSITION impedance_mode= fixed</td>
<td>Joint Position Control</td>
<td>n</td>
<td>n joint positions</td>
</tr>
<tr>
<td>JOINT_POSITION impedance_mode= variable_kp</td>
<td>Joint Position Control with variable stiffness (critically damped)</td>
<td>2n</td>
<td>n joint positions and <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>k</mi><mi>p</mi></msub></mrow><annotation encoding="application/x-tex">k_p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9805em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0315em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">p</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span> for each joint</td>
</tr>
<tr>
<td>JOINT_POSITION impedance_mode= variable</td>
<td>Joint Position Control with variable impedance</td>
<td>3n</td>
<td>n joint positions and <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><msub><mi>k</mi><mi>p</mi></msub><mo separator="true">,</mo><msub><mi>k</mi><mi>d</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(k_p, k_d)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-0.2861em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0315em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">p</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0315em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">d</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span> for each joint</td>
</tr>
<tr>
<td>JOINT_VELOCITY</td>
<td>Joint Velocity Control</td>
<td>n</td>
<td>n joint velocities</td>
</tr>
<tr>
<td>JOINT_TORQUE</td>
<td>Joint Torque Control</td>
<td>n</td>
<td>n joint torques</td>
</tr>
</tbody>
</table>
<p>git submodule update --init --recursive</p>
<h4 id="Objects">Objects</h4>
<p>由 <strong>MujocoObject</strong> 类定义，通过 <code>MJCF XML</code> 格式定义。这些 XML 文件可以保存在磁盘中并加载进仿真模型中，即 <strong>MujocoXMLObject</strong>；也可以通过代码创建，即 <strong>MujocoGeneratedObject</strong>。</p>
<p>例：<strong>HammerObject</strong>，代码见 <code>robosuite/robosuite/models/objects/composite/hammer.py</code></p>
<h3 id="Sensors">Sensors</h3>
<p>传感器可以测量：图像，力-力矩测量值，压力信号（机械手臂上）等等。除了相机和关节传感器之外，可通过  <code>get_sensor_measurement(sensor_name)</code> 来访问。</p>
<p>每个机器人的关节传感器提供了位置和速度信息，关节传感器可作为 <strong>Robot</strong> 的 API 的属性进行访问，如 <code>_joint_positions</code> 和 <code>_joint_velocities</code>。</p>
<p>相机并不能直接被查询，在创建环境时指定一个或多个要使用的相机，图像会自动生成并追加到字典中。</p>
<h2 id="Robomimic-论文-地址">Robomimic 论文 <a target="_blank" rel="noopener" href="https://arxiv.org/pdf/2108.03298">地址</a></h2>
<h3 id="从人类数据集离线学习的挑战">从人类数据集离线学习的挑战</h3>
<ol>
<li>数据来源于非马尔克夫决策过程。人在操作过程中会有外部因素（以前的经验、操作的设备）等等，而且已经验证过带有时间维度的模型从人类数据集中学习效果很好。</li>
<li>不同人的演示存在质量差异（策略、熟练度）。</li>
<li>受数据集大小影响。</li>
<li>训练与验证目标不匹配。因为从模型中选出最好的模型是困难的。（？为什么）</li>
<li>对超参数选择极为敏感。</li>
</ol>
<h3 id="研究的设计">研究的设计</h3>
<h4 id="任务">任务</h4>
<p>Lift, Can, Square(Only sim), Transport(Only sim), Tool hang</p>
<h4 id="数据收集">数据收集</h4>
<ol>
<li><strong>Machine-generated(MG)</strong>：针对于 Lift 和 Can 任务，通过最先进的 RL 算法生成的数据（最优和次优），因为其他的任务无法被 RL 算法解决。</li>
<li><strong>Proficient-Human (PH) and Multi-Human (MH)</strong>：通过 RoboTurk 平台的人类操作收集，MH 表示为 6 个人的混合数据集（两个熟练的人，两个次熟练的人和两个不够熟练的人）。</li>
<li><strong>Observation Modalities</strong>：设置了不同种类的传感器，包括末端执行器、夹爪手指、关节、gt物体状态、每只机械臂从外部摄像头和腕带摄像头采集的图像。我们有两个观测空间&quot;低维&quot;和&quot;图像&quot;。两者都包括末端执行器位姿和夹持器手指位置，仅在是否使用地面真实物体信息(低维)或该信息是否被可用的相机观测值(图像)所替代方面存在差异。</li>
</ol>
<h4 id="训练和测试方案">训练和测试方案</h4>
<table>
<thead>
<tr>
<th>算法名称</th>
<th>类型</th>
<th>主要特点</th>
<th>适用场景</th>
</tr>
</thead>
<tbody>
<tr>
<td>Behavioral Cloning (BC)</td>
<td>监督学习</td>
<td>直接模仿专家演示数据，将状态映射到动作</td>
<td>简单任务，数据质量高</td>
</tr>
<tr>
<td>BC-RNN</td>
<td>监督学习 + RNN</td>
<td>考虑时序信息，能够处理非马尔可夫决策过程</td>
<td>需要历史信息的任务</td>
</tr>
<tr>
<td>Hierarchical BC (HBC)</td>
<td>分层监督学习</td>
<td>将任务分解为高层目标和低层动作</td>
<td>复杂的多阶段任务</td>
</tr>
<tr>
<td>Batch-Constrained Q-Learning (BCQ)</td>
<td>离线强化学习</td>
<td>通过限制动作选择来避免外推错误</td>
<td>有限的离线数据集</td>
</tr>
<tr>
<td>Conservative Q-Learning (CQL)</td>
<td>离线强化学习</td>
<td>保守估计Q值以避免过度估计</td>
<td>安全性要求高的场景</td>
</tr>
<tr>
<td>IRIS</td>
<td>模仿学习</td>
<td>结合了BC和强化学习的优点</td>
<td>需要在模仿和优化间平衡</td>
</tr>
</tbody>
</table>
<p>“low-dim”：训练 2000 轮，100 个梯度过程，50 轮验证一次；<br>
“image”：训练 600 轮，500 个梯度过程，20 轮验证一次。</p>
<h3 id="实验">实验</h3>
<h4 id="PH-数据集和-MH-数据集">PH 数据集和 MH 数据集</h4>
<p><img src="/img/robosuite/low_dim.png" srcset="/img/loading.gif" lazyload alt="不同模型在low_dim模式下的观测"><br>
结论：</p>
<ul>
<li>有历史记录功能的模型（BC-RNN）比 BC 表现要好。模型在 PH 数据集上的表现好于 MH 数据集，可能是因为 MH 数据集中存在演示质量较差的数据。</li>
<li>Batch RL 算法（BCQ, CQL）无法从人类数据集中学到东西。</li>
</ul>
<h4 id="不同质量的数据">不同质量的数据</h4>
<p><img src="/img/robosuite/submodule.png" srcset="/img/loading.gif" lazyload alt="不同质量数据集结果"><br>
结论：</p>
<ul>
<li>BC-RNN 在不同质量的数据集中是一个强 baseline，但是它仍然有提升空间。</li>
<li>Batch RL 算法在更简单的数据集上也一筹莫展。</li>
</ul>
<h4 id="low-dim-变为-image-模式">low_dim 变为 image 模式</h4>
<p><img src="/img/robosuite/image_mode.png" srcset="/img/loading.gif" lazyload alt="image模式的结果"><br>
<img src="/img/robosuite/change.png" srcset="/img/loading.gif" lazyload alt="重要因素的影响"><br>
结论：</p>
<ul>
<li>在 image 模式下的结论与 low_dim 模式下的结论一致。</li>
<li>用于机器人本体感知的特征是重要的。对 low_dim 模式，添加末端执行器的信息会严重伤害机器人（性能下降 49%～88%），但 image 模式就比较包容这个信息（性能下降 2%～29%），性能下降的可能原因是过拟合。</li>
<li>图像初始化和手腕的观察对操作任务是至关重要的。移除像素移动随机化和手腕相机会导致严重的性能下降。</li>
</ul>
<h4 id="超参数选择">超参数选择</h4>
<p>图见上面。</p>
<ol>
<li>lr 从 1e-4 到 1e-3 变化，image 模式受很大影响而 low_dim 模式受影响小。</li>
<li>大的 MLP 网络也会降低性能。</li>
<li>浅层卷积网络代替 resnet 会降低性能。</li>
<li>减少 RNN 隐藏层维度会降低性能。</li>
<li>使用 GMM 策略和 resnet 编码器效果好。</li>
</ol>
<h4 id="最佳模型选择">最佳模型选择</h4>
<img src=/img/robosuite/select_best.png width="50%" style="float:left; margin-right:20px;">
<p>离线学习的最佳模型选择具有挑战性。左图是选择 val_loss 最小的模型或者最后一个 ckpt 与该策略的最佳模型的结果对比，可见选择最佳模型是 non-trivial 的。</p>
<div style="clear:both"></div>
<h4 id="数据集大小的影响">数据集大小的影响</h4>
<p><img src="/img/robosuite/datasize.png" srcset="/img/loading.gif" lazyload alt="数据集大小的影响"><br>
注意到，不太复杂的任务(Lift Can)可以使用一小部分数据产生熟练的策略(成功率75 % ~ 100 %)。其次，在更复杂的任务(Square Transport)上训练的政策在使用50 %或20 %的数据时受到了很大的影响。</p>
<h4 id="转移到真实世界">转移到真实世界</h4>
<p>训练的机器人可以熟练的掌握 Lift 和 Can 任务，非常难的 Tool Hang 任务也可以取得一定成功（3.3%）。这表明在模拟中训练出来的模型是有潜力转移到现实中的。</p>
<h3 id="结论与探讨">结论与探讨</h3>
<ol>
<li>具有时间抽象性的模型可以非常有效地从人类数据集中学习。</li>
<li>需要提高批量(离线) RL从次优人体数据集学习的能力。</li>
<li>改善离线的政策选择对于现实世界的设定很重要。</li>
<li>观测空间的作用很大，超参数也很重要。</li>
<li>利用大规模的人类数据集来解决更复杂的任务是很有希望的。</li>
<li>研究结果转移到真实世界环境中。</li>
</ol>
<h2 id="本周报告（2025-1-3-–-2025-1-10）">本周报告（2025.1.3 – 2025.1.10）</h2>
<h3 id="工作">工作</h3>
<ol>
<li>阅读完 Robomimic 论文，并写完论文阅读笔记；</li>
<li>配置 robomimic 环境（需要 robomimic 版本为 1.4.0），根据<a target="_blank" rel="noopener" href="https://robomimic.github.io/docs/introduction/getting_started.html">教程</a>实现了一个简单的 low_dim 模式下的 BC 模型，在 Lift 任务上取得了 98% 的成功率，视频保存在 <code>/home/ljr/embodied/robomimic/bc_trained_models/test/20250104171913/videos</code>；<br>
<img src="/img/robosuite/Lift_epoch_500.gif" srcset="/img/loading.gif" lazyload alt="Lift 任务成功率"></li>
</ol>
<h3 id="下周工作">下周工作</h3>
<ol>
<li>观察如何将 robomimic 训练出的模型接入 robosuite 中（如何直接加载训练模型？）并观察效果；</li>
<li>尝试抛开 robomimic 框架训练一个简单的 Lift 任务模型，以熟练掌握机器人使用的具体代码而不是调用 API。</li>
</ol>
<h3 id="问题">问题</h3>
<p>在训练时会报错，但不影响训练，可能是因为我的 linux 系统有桌面，导致 <code>OPENGL</code> 库报错。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs bash">  File <span class="hljs-string">&quot;/home/ljr/.conda/envs/robosuite/lib/python3.10/site-packages/OpenGL/error.py&quot;</span>, line 230, <span class="hljs-keyword">in</span> glCheckError<br>    raise self._errorClass(<br>OpenGL.raw.EGL._errors.EGLError: EGLError(<br>	err = EGL_NOT_INITIALIZED,<br>	baseOperation = eglMakeCurrent,<br>	cArguments = (<br>		&lt;OpenGL._opaque.EGLDisplay_pointer object at 0x79fb83fa35c0&gt;,<br>		&lt;OpenGL._opaque.EGLSurface_pointer object at 0x79fb900f8ec0&gt;,<br>		&lt;OpenGL._opaque.EGLSurface_pointer object at 0x79fb900f8ec0&gt;,<br>		&lt;OpenGL._opaque.EGLContext_pointer object at 0x79fb900f8e40&gt;,<br>	),<br>	result = 0<br>)<br>Exception ignored <span class="hljs-keyword">in</span>: &lt;<span class="hljs-keyword">function</span> EGLGLContext.__del__ at 0x79fb9018c790&gt;<br>Traceback (most recent call last):<br>  File <span class="hljs-string">&quot;/home/ljr/.conda/envs/robosuite/lib/python3.10/site-packages/robosuite/renderers/context/egl_context.py&quot;</span>, line 155, <span class="hljs-keyword">in</span> __del__<br>    self.free()<br>  File <span class="hljs-string">&quot;/home/ljr/.conda/envs/robosuite/lib/python3.10/site-packages/robosuite/renderers/context/egl_context.py&quot;</span>, line 149, <span class="hljs-keyword">in</span> free<br>    EGL.eglMakeCurrent(EGL_DISPLAY, EGL.EGL_NO_SURFACE, EGL.EGL_NO_SURFACE, EGL.EGL_NO_CONTEXT)<br>  File <span class="hljs-string">&quot;/home/ljr/.conda/envs/robosuite/lib/python3.10/site-packages/OpenGL/error.py&quot;</span>, line 230, <span class="hljs-keyword">in</span> glCheckError<br>    raise self._errorClass(<br>OpenGL.raw.EGL._errors.EGLError: EGLError(<br>	err = EGL_NOT_INITIALIZED,<br>	baseOperation = eglMakeCurrent,<br>	cArguments = (<br>		&lt;OpenGL._opaque.EGLDisplay_pointer object at 0x79fb83fa35c0&gt;,<br>		&lt;OpenGL._opaque.EGLSurface_pointer object at 0x79fb900f8ec0&gt;,<br>		&lt;OpenGL._opaque.EGLSurface_pointer object at 0x79fb900f8ec0&gt;,<br>		&lt;OpenGL._opaque.EGLContext_pointer object at 0x79fb900f8e40&gt;,<br>	),<br>	result = 0<br>)<br></code></pre></td></tr></table></figure>
<ol>
<li>减少现实和仿真的gap 论文(不局限具身智能，包括自动驾驶等);</li>
<li>Droid、simplerenv、libero、genesis 图像，输入VLM(qwen VL2)，在 last<br>
hidden state 和 embedding的输出有没有明显区别(具体什么区别需要判定)，总结规律;</li>
<li>不同亮度的图像(Droid)在last hidden state 和 embedding 的输出是否<br>
有区别，设置合理的prompt。</li>
</ol>
<h2 id="本周报告（2025-2-16-–-2025-2-20）">本周报告（2025.2.16 – 2025.2.20）</h2>
<h3 id="工作-2">工作</h3>
<ol>
<li>sim2real 方式的论文和方法：</li>
</ol>
<ul>
<li>
<p>域随机化：通过引入随机性扩展机器人在模拟器中的操作范围，使得模拟环境能够迁移这些能力到现实场景（<a target="_blank" rel="noopener" href="https://arxiv.org/abs/2310.04517">https://arxiv.org/abs/2310.04517</a> 等）；</p>
</li>
<li>
<p>域适配：旨在统一模拟环境与真实环境的特征空间，从而在统一特征空间内完成训练和迁移（<a target="_blank" rel="noopener" href="https://ieeexplore.ieee.org/document/10153686">https://ieeexplore.ieee.org/document/10153686</a> 等）；</p>
</li>
<li>
<p>干扰学习：在模拟环境中引入干扰，训练机器人策略，使其能够在充满噪声和不可预测性的现实环境中高效运行（<a target="_blank" rel="noopener" href="https://arxiv.org/abs/2303.04137">https://arxiv.org/abs/2303.04137</a> 等）。</p>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://arxiv.org/pdf/2411.01850">Manibox</a>，主要思想为利用规模化（scalable）、自动化的生成action数据，通过policy generalization方法来有效解决了空间泛化性问题，借助 <strong>YOLO-World</strong> 这样的开集检测模型，ManiBox 精准提取多视角的低维空间信息，将复杂的高维视觉问题转化为简化的状态建模问题，最后通过训练一个<strong>基于状态的策略（state-based policy）</strong>，实现了从仿真到真实世界的高效迁移。结合<strong>随机掩码（random mask）技术</strong>和历史轨迹信息，ManiBox显著提升了策略在应对视觉噪声和检测失败场景下的鲁棒性。</p>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://arxiv.org/abs/2411.11839">RoboGSim</a>，主要思想为利用3D Gaussian Splatting（3DGS）来高保真的重建场景，并对机械臂关节的点云进行分割。随后，通过 MDH 动态模型控制与各关节对应的点云，从而实现机械臂的动态渲染。可用来合成数据和评估数据。</p>
</li>
</ul>
<ol start="2">
<li>VLM 输入图像<br>
已经实现将 Droid 三个相机拍出的视频输入 VL2 网络，但出现问题：text_prompt 输出为空，正在找原因。</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python">processor = AutoProcessor.from_pretrained(<span class="hljs-string">&quot;Qwen/Qwen2-VL-2B&quot;</span>)<br>conversation = [<br>    &#123;<br>        <span class="hljs-string">&quot;role&quot;</span>: <span class="hljs-string">&quot;user&quot;</span>,<br>        <span class="hljs-string">&quot;content&quot;</span>: [<br>            &#123;<span class="hljs-string">&quot;type&quot;</span>: <span class="hljs-string">&quot;video&quot;</span>&#125;,<br>            &#123;<span class="hljs-string">&quot;type&quot;</span>: <span class="hljs-string">&quot;text&quot;</span>, <span class="hljs-string">&quot;text&quot;</span>: <span class="hljs-string">&quot;What happened in the video?&quot;</span>&#125;,<br>        ],<br>    &#125;<br>]<br>text_prompt = processor.apply_chat_template(conversation, tokenize=<span class="hljs-literal">False</span>, add_generation_prompt=<span class="hljs-literal">True</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;text_prompt&quot;</span>, text_prompt) <span class="hljs-comment"># output text_prompt</span><br></code></pre></td></tr></table></figure>
<ol start="3">
<li>大模型的训练流程</li>
</ol>
<ul>
<li>
<p>预训练阶段（Pretraining）<br>
目标：通过无监督学习的方式，让模型学习语言的通用规律和模式，形成基础的语言理解能力。<br>
数据：使用海量的文本数据，如网络爬取的文本、书籍、论文等，数据量通常在2T~3T的token级别。<br>
训练过程：模型通过自监督学习任务（如掩码语言模型MLM、下一句预测NSP等）进行训练，学习如何根据上下文预测缺失的单词或句子。</p>
</li>
<li>
<p>监督微调阶段（Supervised Fine-Tuning, SFT）<br>
目标：在预训练模型的基础上，通过有监督学习的方式，使模型能够更好地完成特定任务，如对话、文本生成等。<br>
数据：使用人工标注的指令数据或特定任务的数据，数据规模相对较小，但质量较高。<br>
训练过程：对预训练模型进行微调，使其适应特定的任务需求。</p>
</li>
<li>
<p>奖励模型训练阶段（Reward Modeling）<br>
目标：训练一个奖励模型，用于评估生成文本的质量，并为强化学习阶段提供奖励信号。<br>
数据：使用人工标注的偏好数据，即对生成文本的质量进行排序。<br>
训练过程：通过比较不同生成文本的质量，训练奖励模型。</p>
</li>
<li>
<p>强化学习阶段（Reinforcement Learning, RL）<br>
目标：利用奖励模型的反馈，进一步优化模型的生成能力，使其生成的文本更符合人类偏好。<br>
训练过程：使用强化学习算法（如PPO、DPO等），根据奖励模型的评分对模型进行优化。</p>
</li>
<li>
<p>参数计算<br>
主要参数为 transformer 层的参数，L 层transformer，隐藏维度为 h，词表嵌入大小为 V，那么具体参数量为</p>
</li>
</ul>
<p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>L</mi><mo stretchy="false">(</mo><mn>12</mn><msup><mi>h</mi><mn>2</mn></msup><mo>+</mo><mn>13</mn><mi>h</mi><mo stretchy="false">)</mo><mo>+</mo><mi>V</mi><mi>h</mi><mo>≈</mo><mn>12</mn><mi>L</mi><msup><mi>h</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">L(12h^2+13h)+Vh\approx 12Lh^2
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1141em;vertical-align:-0.25em;"></span><span class="mord mathnormal">L</span><span class="mopen">(</span><span class="mord">12</span><span class="mord"><span class="mord mathnormal">h</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">13</span><span class="mord mathnormal">h</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">Vh</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8641em;"></span><span class="mord">12</span><span class="mord mathnormal">L</span><span class="mord"><span class="mord mathnormal">h</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></span></p>
<p>一个 7B 模型，有 70 亿参数，储存时每个参数以 fp16（2个字节） 格式存储，那么大小为</p>
<p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mn>7</mn><mo>×</mo><mn>1</mn><msup><mn>0</mn><mn>10</mn></msup><mo>×</mo><mn>2</mn><mi mathvariant="normal">/</mi><mn>1024</mn><mi mathvariant="normal">/</mi><mn>1024</mn><mo>≈</mo><mn>14</mn><mi>G</mi></mrow><annotation encoding="application/x-tex">7\times 10^{10}\times 2 / 1024 / 1024\approx 14G
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">7</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.9474em;vertical-align:-0.0833em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">10</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">2/1024/1024</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord">14</span><span class="mord mathnormal">G</span></span></span></span></span></p>
<ul>
<li>推理、训练显存<br>
推理时看量化，在32fp下 1B 参数对应 3.75G 显存，int8 下对应 0.9G 显存；<br>
训练时需要的显存是至少推理的9-10倍。</li>
</ul>
<p><br><br></p>
<h2 id="本周报告（2025-2-21-–-2025-2-27）">本周报告（2025.2.21 – 2025.2.27）</h2>
<h3 id="工作-3">工作</h3>
<ol>
<li>调整不同数据集的亮度，判断其 embed 和 last hidden state 输出有什么区别；</li>
</ol>
<ul>
<li>获取数据集：一共使用了四个数据集，其情况如下表所示：</li>
</ul>
<table>
<thead>
<tr>
<th>数据集名称</th>
<th>获取方式</th>
<th>相机视角</th>
<th>机械臂种类</th>
<th>样例图片</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Droid</code></td>
<td>真实</td>
<td>三个相机视角，<code>exterior_1_left</code>, <code>wrist</code>,<code>exterior_2_left</code></td>
<td>Franka</td>
<td><img src="/img/robosuite/droid_ex.png" srcset="/img/loading.gif" lazyload alt="Droid样例"></td>
</tr>
<tr>
<td><code>Simpler_env</code></td>
<td>仿真</td>
<td>单一固定视角，从样例视频生成</td>
<td>Google robot</td>
<td><img src="/img/robosuite/simpler_ex.png" srcset="/img/loading.gif" lazyload alt="Simpler样例"></td>
</tr>
<tr>
<td><code>Genesis</code></td>
<td>仿真</td>
<td>多视角，可配置相机位置，主要配置了左中右三种相机位置，从样例视频生成</td>
<td>Franka</td>
<td><img src="/img/robosuite/genesis_ex.png" srcset="/img/loading.gif" lazyload alt="Genesis样例"></td>
</tr>
<tr>
<td><code>Libero</code></td>
<td>仿真</td>
<td>两个相机视角，<code>agentview</code>, <code>wrist</code>，是给好的数据集</td>
<td>Franka</td>
<td><img src="/img/robosuite/libero_ex.png" srcset="/img/loading.gif" lazyload alt="Libero样例"></td>
</tr>
</tbody>
</table>
<ul>
<li>
<p>更改亮度的代码：在照片左上角增加一个点光源</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">add_point_light</span>(<span class="hljs-params"></span><br><span class="hljs-params">    image_path, </span><br><span class="hljs-params">    center_position,  <span class="hljs-comment"># 光源中心坐标 (x, y)</span></span><br><span class="hljs-params">    radius=<span class="hljs-number">100</span>,        <span class="hljs-comment"># 光源半径</span></span><br><span class="hljs-params">    brightness=<span class="hljs-number">1.5</span>,    <span class="hljs-comment"># 亮度增强因子（1.0为原图）</span></span><br><span class="hljs-params">    light_color=(<span class="hljs-params"><span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span></span>)  <span class="hljs-comment"># 光源颜色（默认为白色）</span></span><br><span class="hljs-params"></span>):<br></code></pre></td></tr></table></figure>
<div style="display: flex; gap: 20px;">
  <div>
      <p>Droid 原始图片：</p>
      <img src="/img/robosuite/droid.png" srcset="/img/loading.gif" lazyload alt="原始图片" width="400"/>
  </div>
  <div>
      <p>Droid 添加点光源后：</p>
      <img src="/img/robosuite/droid_light.png" srcset="/img/loading.gif" lazyload alt="添加光源后的图片" width="400"/>
  </div>
</div>
</li>
<li>
<p>判断向量之间的差异：主要是使用了余弦相似度和 MSE ，后面列出的数据皆为余弦相似度</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">compare_vectors</span>(<span class="hljs-params">vec1, vec2, method=<span class="hljs-string">&quot;cosine&quot;</span></span>):<br>  <span class="hljs-string">&quot;&quot;&quot;比较两个向量的差异，支持余弦相似度或MSE&quot;&quot;&quot;</span><br>  <span class="hljs-keyword">if</span> method == <span class="hljs-string">&quot;cosine&quot;</span>:<br>      cos = torch.nn.CosineSimilarity(dim=<span class="hljs-number">0</span>)<br>      <span class="hljs-keyword">return</span> cos(vec1.flatten(), vec2.flatten()).item()<br>  <span class="hljs-keyword">elif</span> method == <span class="hljs-string">&quot;mse&quot;</span>:<br>      mse = torch.nn.MSELoss()<br>      <span class="hljs-keyword">return</span> mse(vec1, vec2).item()<br></code></pre></td></tr></table></figure>
</li>
<li>
<p>最终结果<br>
可以看出， gap 比较大的是 Libero 数据集，其它数据集的余弦相似度都在 0.8 以上。</p>
<table>
<thead>
<tr>
<th>模型</th>
<th>平均嵌入向量比较（平均值）</th>
<th>平均最后隐藏层比较（平均值）</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Droid</code></td>
<td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0.7992</mn></mrow><annotation encoding="application/x-tex">0.7992</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0.7992</span></span></span></span></td>
<td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0.8026</mn></mrow><annotation encoding="application/x-tex">0.8026</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0.8026</span></span></span></span></td>
</tr>
<tr>
<td><code>Genesis</code></td>
<td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0.9608</mn></mrow><annotation encoding="application/x-tex">0.9608</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0.9608</span></span></span></span></td>
<td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0.8570</mn></mrow><annotation encoding="application/x-tex">0.8570</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0.8570</span></span></span></span></td>
</tr>
<tr>
<td><code>Libero</code></td>
<td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0.6564</mn></mrow><annotation encoding="application/x-tex">0.6564</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0.6564</span></span></span></span></td>
<td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0.7427</mn></mrow><annotation encoding="application/x-tex">0.7427</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0.7427</span></span></span></span></td>
</tr>
<tr>
<td><code>Simpler</code></td>
<td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0.9278</mn></mrow><annotation encoding="application/x-tex">0.9278</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0.9278</span></span></span></span></td>
<td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0.8330</mn></mrow><annotation encoding="application/x-tex">0.8330</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0.8330</span></span></span></span></td>
</tr>
</tbody>
</table>
</li>
</ul>
<br>
<ol start="2">
<li>不同数据集的图片输入 <code>qwen2-VL</code> ，其 <code>embed</code> 和 <code>last hidden state</code> 输出有什么区别</li>
</ol>
<ul>
<li>
<p>仍然是对四张数据集的图片，进行统一化处理（即都 <code>resize</code> 为 224*224），并输入 <code>qwen2-vl</code> 模型中，这样可以保证输出的向量维度一样；</p>
</li>
<li>
<p>对不同数据集的各种向量计算余弦相似度，得到的结果如下：</p>
</li>
</ul>
<table>
<thead>
<tr>
<th>数据集对比</th>
<th>嵌入向量相似度（平均值）</th>
<th>最后隐藏层相似度（平均值）</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>DROID</code> vs <code>Genesis</code></td>
<td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0.4665</mn></mrow><annotation encoding="application/x-tex">0.4665</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0.4665</span></span></span></span></td>
<td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0.4954</mn></mrow><annotation encoding="application/x-tex">0.4954</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0.4954</span></span></span></span></td>
</tr>
<tr>
<td><code>DROID</code> vs <code>Libero</code></td>
<td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0.5317</mn></mrow><annotation encoding="application/x-tex">0.5317</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0.5317</span></span></span></span></td>
<td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0.5814</mn></mrow><annotation encoding="application/x-tex">0.5814</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0.5814</span></span></span></span></td>
</tr>
<tr>
<td><code>DROID</code> vs <code>Simpler</code></td>
<td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0.4757</mn></mrow><annotation encoding="application/x-tex">0.4757</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0.4757</span></span></span></span></td>
<td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0.5661</mn></mrow><annotation encoding="application/x-tex">0.5661</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0.5661</span></span></span></span></td>
</tr>
<tr>
<td><code>Libero</code> vs <code>Genesis</code></td>
<td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0.6601</mn></mrow><annotation encoding="application/x-tex">0.6601</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0.6601</span></span></span></span></td>
<td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0.6343</mn></mrow><annotation encoding="application/x-tex">0.6343</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0.6343</span></span></span></span></td>
</tr>
<tr>
<td><code>Libero</code> vs <code>Simpler</code></td>
<td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0.4494</mn></mrow><annotation encoding="application/x-tex">0.4494</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0.4494</span></span></span></span></td>
<td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0.5803</mn></mrow><annotation encoding="application/x-tex">0.5803</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0.5803</span></span></span></span></td>
</tr>
</tbody>
</table>
<p>从结果可以观察到：</p>
<ol>
<li>大多数情况下，最后隐藏层的相似度比嵌入向量的相似度更高，这可能表明最后隐藏层包含了更丰富的特征信息</li>
<li>Libero 和 Genesis 数据集之间的相似度最高，说明这两个数据集的图像特征可能更接近</li>
<li>整体相似度都在 0.45-0.66 之间，表明不同数据集之间存在一定的差异性</li>
</ol>
<h3 id="下周任务">下周任务</h3>
<ol>
<li>尽量调好适配 Droid 数据集的相机，让不同数据集拍出来的图片是同一个角度的（<code>exterior_1_left</code>, <code>wrist</code>,<code>exterior_2_left</code>）；genesis可以手动调节相机，但是 libero 是给定的数据，不能直接在数据集上进行修改。<strong>所以如何修改呢？</strong></li>
<li>在收集好数据后再进行向量的对比。</li>
<li>待续</li>
</ol>
<p><br><br></p>
<h2 id="本周报告（2025-2-28-–-2025-3-6）">本周报告（2025.2.28 – 2025.3.6）</h2>
<h3 id="工作-4">工作</h3>
<ol>
<li>为输出的向量增加了方差的对比；</li>
<li>为给图片增加亮度提供了新方法：给图片像素值整体扩大或缩小倍数，分别取了 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mn>0.8</mn><mo separator="true">,</mo><mn>0.9</mn><mo separator="true">,</mo><mn>1.1</mn><mo separator="true">,</mo><mn>1.2</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[0.8, 0.9, 1.1, 1.2]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">0.8</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">0.9</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1.1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1.2</span><span class="mclose">]</span></span></span></span> 四个数值进行对比；</li>
<li>修改 prompt，如果数据集给出了 prompt 的话就把这个 prompt 输入到 qwen2-VL 中，否则使用默认的 prompt。</li>
<li>基本对齐了 genesis 和 droid 的左右视角，并进行了这两个数据集输出的对比。</li>
</ol>
<h4 id="Droid-余弦相似度和方差比较">Droid 余弦相似度和方差比较</h4>
<table>
<thead>
<tr>
<th>指标类型</th>
<th>点光源图片</th>
<th>亮度因子 0.8</th>
<th>亮度因子 0.9</th>
<th>亮度因子 1.1</th>
<th>亮度因子 1.2</th>
<th>原始图片</th>
</tr>
</thead>
<tbody>
<tr>
<td>嵌入向量相似度(对应提示词)</td>
<td>0.8093</td>
<td>0.9265</td>
<td>0.9532</td>
<td><strong>0.9167</strong></td>
<td><strong>0.8650</strong></td>
<td>-</td>
</tr>
<tr>
<td>嵌入向量相似度(默认提示词)</td>
<td><strong>0.8102</strong></td>
<td><strong>0.9263</strong></td>
<td><strong>0.9548</strong></td>
<td>0.9129</td>
<td>0.8649</td>
<td>-</td>
</tr>
<tr>
<td>最后隐藏层相似度(对应提示词)</td>
<td><strong>0.8272</strong></td>
<td><strong>0.9173</strong></td>
<td><strong>0.9438</strong></td>
<td><strong>0.9170</strong></td>
<td><strong>0.8815</strong></td>
<td>-</td>
</tr>
<tr>
<td>最后隐藏层相似度(默认提示词)</td>
<td>0.8150</td>
<td>0.9102</td>
<td>0.9404</td>
<td>0.9073</td>
<td>0.8729</td>
<td>-</td>
</tr>
<tr>
<td>嵌入向量方差(对应提示词)</td>
<td>1.2931</td>
<td>1.5429</td>
<td>1.5708</td>
<td>1.5530</td>
<td>1.4533</td>
<td>1.5593</td>
</tr>
<tr>
<td>嵌入向量方差(默认提示词)</td>
<td>1.3888</td>
<td>1.6548</td>
<td>1.6804</td>
<td>1.6636</td>
<td>1.5563</td>
<td>1.6642</td>
</tr>
<tr>
<td>最后隐藏层方差(对应提示词)</td>
<td>23.5463</td>
<td>23.7557</td>
<td>23.8193</td>
<td>23.8476</td>
<td>23.7426</td>
<td>23.8269</td>
</tr>
<tr>
<td>最后隐藏层方差(默认提示词)</td>
<td>23.1822</td>
<td>23.3891</td>
<td>23.4461</td>
<td>23.4846</td>
<td>23.3775</td>
<td>23.4565</td>
</tr>
</tbody>
</table>
<h4 id="Genesis-余弦相似度和方差比较">Genesis 余弦相似度和方差比较</h4>
<table>
<thead>
<tr>
<th>指标类型</th>
<th>点光源图片</th>
<th>亮度因子 0.8</th>
<th>亮度因子 0.9</th>
<th>亮度因子 1.1</th>
<th>亮度因子 1.2</th>
<th>原始图片</th>
</tr>
</thead>
<tbody>
<tr>
<td>嵌入向量相似度(有提示词)</td>
<td><strong>0.9523</strong></td>
<td>0.9254</td>
<td><strong>0.9562</strong></td>
<td>0.9385</td>
<td>0.9067</td>
<td>-</td>
</tr>
<tr>
<td>嵌入向量相似度(默认提示词)</td>
<td>0.9518</td>
<td><strong>0.9256</strong></td>
<td><strong>0.9562</strong></td>
<td><strong>0.9393</strong></td>
<td><strong>0.9069</strong></td>
<td>-</td>
</tr>
<tr>
<td>最后隐藏层相似度(有提示词)</td>
<td><strong>0.8303</strong></td>
<td><strong>0.7665</strong></td>
<td><strong>0.8335</strong></td>
<td>0.7974</td>
<td><strong>0.7298</strong></td>
<td>-</td>
</tr>
<tr>
<td>最后隐藏层相似度(默认提示词)</td>
<td>0.8284</td>
<td>0.7660</td>
<td>0.8332</td>
<td><strong>0.7982</strong></td>
<td>0.7290</td>
<td>-</td>
</tr>
<tr>
<td>嵌入向量方差(有提示词)</td>
<td>1.5404</td>
<td>1.5219</td>
<td>1.5288</td>
<td>1.5300</td>
<td>1.5355</td>
<td>1.5288</td>
</tr>
<tr>
<td>嵌入向量方差(默认提示词)</td>
<td>1.5378</td>
<td>1.5214</td>
<td>1.5271</td>
<td>1.5276</td>
<td>1.5343</td>
<td>1.5263</td>
</tr>
<tr>
<td>最后隐藏层方差(有提示词)</td>
<td>21.2368</td>
<td>21.2191</td>
<td>21.2396</td>
<td>21.3057</td>
<td>21.2890</td>
<td>21.2734</td>
</tr>
<tr>
<td>最后隐藏层方差(默认提示词)</td>
<td>21.2306</td>
<td>21.2025</td>
<td>21.2302</td>
<td>21.2906</td>
<td>21.2698</td>
<td>21.2607</td>
</tr>
</tbody>
</table>
<h4 id="Libero-余弦相似度和方差比较">Libero 余弦相似度和方差比较</h4>
<table>
<thead>
<tr>
<th>指标类型</th>
<th>点光源图片</th>
<th>亮度因子 0.8</th>
<th>亮度因子 0.9</th>
<th>亮度因子 1.1</th>
<th>亮度因子 1.2</th>
<th>原始图片</th>
</tr>
</thead>
<tbody>
<tr>
<td>嵌入向量相似度(有提示词)</td>
<td><strong>0.7002</strong></td>
<td><strong>0.8791</strong></td>
<td>0.9356</td>
<td>0.9280</td>
<td>0.8722</td>
<td>-</td>
</tr>
<tr>
<td>嵌入向量相似度(默认提示词)</td>
<td>0.6972</td>
<td>0.8761</td>
<td><strong>0.9383</strong></td>
<td><strong>0.9298</strong></td>
<td><strong>0.8768</strong></td>
<td>-</td>
</tr>
<tr>
<td>最后隐藏层相似度(有提示词)</td>
<td><strong>0.7888</strong></td>
<td><strong>0.9113</strong></td>
<td><strong>0.9466</strong></td>
<td><strong>0.9335</strong></td>
<td><strong>0.9043</strong></td>
<td>-</td>
</tr>
<tr>
<td>最后隐藏层相似度(默认提示词)</td>
<td>0.7784</td>
<td>0.9018</td>
<td>0.9450</td>
<td>0.9289</td>
<td>0.8979</td>
<td>-</td>
</tr>
<tr>
<td>嵌入向量方差(有提示词)</td>
<td>1.5132</td>
<td>1.3966</td>
<td>1.4318</td>
<td>1.4685</td>
<td>1.4725</td>
<td>1.5980</td>
</tr>
<tr>
<td>嵌入向量方差(默认提示词)</td>
<td>1.6414</td>
<td>1.5044</td>
<td>1.5550</td>
<td>1.5926</td>
<td>1.5870</td>
<td>1.7395</td>
</tr>
<tr>
<td>最后隐藏层方差(有提示词)</td>
<td>25.0966</td>
<td>24.8687</td>
<td>25.3594</td>
<td>24.9500</td>
<td>24.6622</td>
<td>26.2332</td>
</tr>
<tr>
<td>最后隐藏层方差(默认提示词)</td>
<td>25.0144</td>
<td>24.4799</td>
<td>25.0843</td>
<td>24.6315</td>
<td>24.2859</td>
<td>26.0618</td>
</tr>
</tbody>
</table>
<h4 id="结论">结论</h4>
<ol>
<li>对于<strong>最后隐藏层相似度</strong>来说，有对应提示词的图片的余弦相似度更高，说明有提示词的图片的特征提取效果更好；</li>
<li>对于<strong>嵌入向量方差</strong>来说，有对应提示词的图片的方差更小；而对于<strong>最后隐藏层方差</strong>，有对应提示词的图片的方差更大。</li>
<li>显然，所有的输出都是最后隐藏层方差远大于嵌入向量方差，说明最后隐藏层包含的特征信息更多。</li>
</ol>
<h4 id="Genesis和DROID的对比">Genesis和DROID的对比</h4>
<p>下面是视角对齐后的 Genesis 和 DROID 的图片对比：</p>
<div style="display: flex; justify-content: center; align-items: center; gap: 40px;">
    <div style="flex: 1; text-align: center;">
        <img src="/img/robosuite/genesis.png" srcset="/img/loading.gif" lazyload alt="Genesis数据集" style="width: 400px; height: 200px; object-fit: cover;">
        <p>Genesis数据集</p>
    </div>
    <div style="flex: 1; text-align: center;">
        <img src="/img/robosuite/droid.png" srcset="/img/loading.gif" lazyload alt="DROID数据集" style="width: 400px; height: 200px; object-fit: cover;">
        <p>DROID数据集</p>
    </div>
</div>
<h5 id="回顾：未对齐时的数据">回顾：未对齐时的数据</h5>
<table>
<thead>
<tr>
<th>数据集对比</th>
<th>嵌入向量相似度（平均值）</th>
<th>最后隐藏层相似度（平均值）</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>DROID</code> vs <code>Genesis</code></td>
<td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0.4665</mn></mrow><annotation encoding="application/x-tex">0.4665</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0.4665</span></span></span></span></td>
<td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0.4954</mn></mrow><annotation encoding="application/x-tex">0.4954</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0.4954</span></span></span></span></td>
</tr>
<tr>
<td><code>DROID</code> vs <code>Libero</code></td>
<td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0.5317</mn></mrow><annotation encoding="application/x-tex">0.5317</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0.5317</span></span></span></span></td>
<td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0.5814</mn></mrow><annotation encoding="application/x-tex">0.5814</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0.5814</span></span></span></span></td>
</tr>
<tr>
<td><code>DROID</code> vs <code>Simpler</code></td>
<td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0.4757</mn></mrow><annotation encoding="application/x-tex">0.4757</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0.4757</span></span></span></span></td>
<td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0.5661</mn></mrow><annotation encoding="application/x-tex">0.5661</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0.5661</span></span></span></span></td>
</tr>
<tr>
<td><code>Libero</code> vs <code>Genesis</code></td>
<td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0.6601</mn></mrow><annotation encoding="application/x-tex">0.6601</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0.6601</span></span></span></span></td>
<td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0.6343</mn></mrow><annotation encoding="application/x-tex">0.6343</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0.6343</span></span></span></span></td>
</tr>
<tr>
<td><code>Libero</code> vs <code>Simpler</code></td>
<td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0.4494</mn></mrow><annotation encoding="application/x-tex">0.4494</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0.4494</span></span></span></span></td>
<td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0.5803</mn></mrow><annotation encoding="application/x-tex">0.5803</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0.5803</span></span></span></span></td>
</tr>
</tbody>
</table>
<p>对齐后的更详细数据：</p>
<table>
<thead>
<tr>
<th>指标</th>
<th><code>DROID</code> vs <code>Genesis</code>（对齐后）</th>
</tr>
</thead>
<tbody>
<tr>
<td>嵌入向量相似度</td>
<td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0.5239</mn></mrow><annotation encoding="application/x-tex">0.5239</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0.5239</span></span></span></span></td>
</tr>
<tr>
<td>最后隐藏层相似度</td>
<td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0.5604</mn></mrow><annotation encoding="application/x-tex">0.5604</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0.5604</span></span></span></span></td>
</tr>
<tr>
<td>DROID嵌入向量方差</td>
<td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1.4824</mn></mrow><annotation encoding="application/x-tex">1.4824</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1.4824</span></span></span></span></td>
</tr>
<tr>
<td>Genesis嵌入向量方差</td>
<td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1.6932</mn></mrow><annotation encoding="application/x-tex">1.6932</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1.6932</span></span></span></span></td>
</tr>
<tr>
<td>DROID最后隐藏层方差</td>
<td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>23.2480</mn></mrow><annotation encoding="application/x-tex">23.2480</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">23.2480</span></span></span></span></td>
</tr>
<tr>
<td>Genesis最后隐藏层方差</td>
<td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>23.6162</mn></mrow><annotation encoding="application/x-tex">23.6162</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">23.6162</span></span></span></span></td>
</tr>
</tbody>
</table>
<p>通过对比可以看出，对齐后的相似度（无论是嵌入向量还是最后隐藏层）都有所提升，说明对齐操作确实提高了两个数据集之间的相似性。</p>
<h3 id="别的尝试">别的尝试</h3>
<p>仿照 simpler_env 对 genesis 加一个桌子，目前正在进行试验（未成功）。</p>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>Robosuite 论文阅读</div>
      <div>https://kingdom-of-warriors.github.io/2024/12/29/Robosuite论文阅读/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>Rayy</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2024年12月29日</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>许可协议</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - 署名">
                    <i class="iconfont icon-cc-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2025/02/24/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%8E%9F%E7%90%86%E7%AC%94%E8%AE%B0/" title="数据库原理笔记">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">数据库原理笔记</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2024/09/29/docker%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" title="docker学习笔记">
                        <span class="hidden-mobile">docker学习笔记</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
  
  
    <article id="comments" lazyload>
      
  <div id="gitalk-container"></div>
  <script type="text/javascript">
    Fluid.utils.loadComments('#gitalk-container', function() {
      Fluid.utils.createCssLink('/css/gitalk.css')
      Fluid.utils.createScript('https://lib.baomitu.com/gitalk/1.8.0/gitalk.min.js', function() {
        var options = Object.assign(
          {"clientID":"Ov23liz6eV0VasfLM4z1","clientSecret":"65c93e1b98781b2517f0ae355361bb087488e8f7","repo":"kingdom-of-warriors.github.io","owner":"kingdom-of-warriors","admin":["kingdom-of-warriors"],"language":"zh-CN","labels":["Gitalk"],"perPage":10,"pagerDirection":"last","distractionFreeMode":false,"createIssueManually":true,"proxy":"https://cors-anywhere.azm.workers.dev/https://github.com/login/oauth/access_token"},
          {
            id: '49e60eef384e2e0c14f237aa09d327c7'
          }
        )
        var gitalk = new Gitalk(options);
        gitalk.render('gitalk-container');
      });
    });
  </script>
  <noscript>Please enable JavaScript to view the comments</noscript>


    </article>
  


          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>目录</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  


  
  








    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/5.0.0/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
